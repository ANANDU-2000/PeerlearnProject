<!DOCTYPE html>
<html lang="en" x-data="{ darkMode: false }" :class="{ 'dark': darkMode }">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ mentor.get_full_name|default:mentor.username }} - Mentor Profile | PeerLearn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/cropperjs@1.5.12/dist/cropper.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/cropperjs@1.5.12/dist/cropper.min.js"></script>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#0056d3',
                        secondary: '#667eea'
                    }
                }
            }
        }
    </script>
    
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .profile-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .dark .profile-card {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .session-card {
            transition: all 0.3s ease;
        }
        .session-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .cropper-container {
            max-width: 100%;
            max-height: 400px;
        }
    </style>
</head>

<body class="min-h-screen transition-colors duration-300" :class="darkMode ? 'bg-gray-900 text-white' : 'bg-gray-50 text-gray-900'">
    
    <!-- Navigation -->
    <nav class="sticky top-0 z-50 backdrop-blur-lg" :class="darkMode ? 'bg-gray-900/80 border-gray-700' : 'bg-white/80 border-gray-200'" style="border-bottom: 1px solid;">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-4">
                    <a href="/" class="text-2xl font-bold text-primary">PeerLearn</a>
                    <div class="hidden md:flex items-center space-x-2 ml-8">
                        <input type="text" placeholder="Search..." 
                               class="px-4 py-2 rounded-lg border transition-colors duration-300"
                               :class="darkMode ? 'bg-gray-800 border-gray-600 text-white placeholder-gray-400' : 'bg-white border-gray-300 text-gray-900'">
                        <button class="p-2 rounded-lg transition-colors duration-300"
                                :class="darkMode ? 'bg-gray-800 text-gray-300 hover:bg-gray-700' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'">
                            <i data-feather="search" class="h-5 w-5"></i>
                        </button>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <!-- Dark/Light Mode Toggle -->
                    <button @click="darkMode = !darkMode" 
                            class="p-2 rounded-lg transition-all duration-300 transform hover:scale-110"
                            :class="darkMode ? 'bg-yellow-500 text-yellow-900' : 'bg-gray-800 text-yellow-400'">
                        <i :class="darkMode ? 'fas fa-sun' : 'fas fa-moon'" class="h-5 w-5"></i>
                    </button>
                    
                    <div class="flex items-center space-x-3">
                        {% if request.user.is_authenticated %}
                            <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm">
                                {{ request.user.username|first|upper }}
                            </div>
                            <span class="hidden md:block">{{ request.user.username }}</span>
                        {% else %}
                            <a href="/login/" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                Login
                            </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8" x-data="profileData()">
        
        <!-- Profile Header -->
        <div class="gradient-bg rounded-2xl p-8 mb-8 relative overflow-hidden">
            <div class="absolute inset-0 opacity-10">
                <svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none">
                    <defs>
                        <pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse">
                            <path d="M 10 0 L 0 0 0 10" fill="none" stroke="currentColor" stroke-width="0.5"/>
                        </pattern>
                    </defs>
                    <rect width="100" height="100" fill="url(#grid)" />
                </svg>
            </div>
            
            <div class="relative z-10 flex flex-col md:flex-row items-center md:items-start space-y-6 md:space-y-0 md:space-x-8">
                <!-- Profile Image -->
                <div class="relative">
                    <div class="w-48 h-48 relative group">
                        {% if mentor.profile_image %}
                            <img src="{{ mentor.profile_image.url }}" 
                                 alt="{{ mentor.username }}" 
                                 class="w-full h-full rounded-full object-cover border-4 border-white shadow-2xl">
                        {% else %}
                            <div class="w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-6xl font-bold border-4 border-white shadow-2xl">
                                {{ mentor.username|first|upper }}{{ mentor.username|slice:"1:2"|upper }}
                            </div>
                        {% endif %}
                        
                        {% if request.user == mentor %}
                            <button @click="showImageUpload = true" 
                                    class="absolute bottom-2 right-2 bg-white text-gray-700 p-3 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-all duration-300 transform hover:scale-110">
                                <i data-feather="camera" class="h-5 w-5"></i>
                            </button>
                        {% endif %}
                    </div>
                    
                    <!-- Online Status -->
                    <div class="absolute bottom-4 right-8 w-6 h-6 bg-green-500 border-4 border-white rounded-full"></div>
                </div>
                
                <!-- Profile Info -->
                <div class="flex-1 text-center md:text-left text-white">
                    <h1 class="text-4xl font-bold mb-2">{{ mentor.get_full_name|default:mentor.username }}</h1>
                    <p class="text-xl opacity-90 mb-4">{{ mentor.role|title }} • @{{ mentor.username }}</p>
                    
                    <div class="flex flex-wrap justify-center md:justify-start gap-4 mb-6">
                        <div class="profile-card rounded-lg px-4 py-2">
                            <div class="text-2xl font-bold">234</div>
                            <div class="text-sm opacity-80">Followers</div>
                        </div>
                        <div class="profile-card rounded-lg px-4 py-2">
                            <div class="text-2xl font-bold">1.2K</div>
                            <div class="text-sm opacity-80">Profile Views</div>
                        </div>
                        <div class="profile-card rounded-lg px-4 py-2">
                            <div class="text-2xl font-bold">4.8</div>
                            <div class="text-sm opacity-80">Avg Rating</div>
                        </div>
                        <div class="profile-card rounded-lg px-4 py-2">
                            <div class="text-2xl font-bold">67</div>
                            <div class="text-sm opacity-80">Sessions</div>
                        </div>
                    </div>
                    
                    {% if request.user != mentor %}
                        <div class="flex justify-center md:justify-start space-x-4">
                            <button class="bg-white text-gray-800 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors flex items-center space-x-2">
                                <i data-feather="user-plus" class="h-5 w-5"></i>
                                <span>Follow</span>
                            </button>
                            <button class="bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center space-x-2">
                                <i data-feather="message-circle" class="h-5 w-5"></i>
                                <span>Message</span>
                            </button>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <!-- Content Tabs -->
        <div class="mb-8">
            <div class="flex space-x-1 rounded-lg p-1" :class="darkMode ? 'bg-gray-800' : 'bg-gray-200'">
                <button @click="activeTab = 'about'" 
                        :class="activeTab === 'about' ? (darkMode ? 'bg-gray-700 text-white' : 'bg-white text-primary shadow') : (darkMode ? 'text-gray-300' : 'text-gray-600')"
                        class="px-6 py-3 rounded-md font-medium transition-all">
                    About
                </button>
                <button @click="activeTab = 'sessions'" 
                        :class="activeTab === 'sessions' ? (darkMode ? 'bg-gray-700 text-white' : 'bg-white text-primary shadow') : (darkMode ? 'text-gray-300' : 'text-gray-600')"
                        class="px-6 py-3 rounded-md font-medium transition-all">
                    Sessions
                </button>
                <button @click="activeTab = 'reviews'" 
                        :class="activeTab === 'reviews' ? (darkMode ? 'bg-gray-700 text-white' : 'bg-white text-primary shadow') : (darkMode ? 'text-gray-300' : 'text-gray-600')"
                        class="px-6 py-3 rounded-md font-medium transition-all">
                    Reviews
                </button>
                <button @click="activeTab = 'activity'" 
                        :class="activeTab === 'activity' ? (darkMode ? 'bg-gray-700 text-white' : 'bg-white text-primary shadow') : (darkMode ? 'text-gray-300' : 'text-gray-600')"
                        class="px-6 py-3 rounded-md font-medium transition-all">
                    Activity
                </button>
            </div>
        </div>

        <!-- Tab Content -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <!-- Main Content -->
            <div class="lg:col-span-2">
                
                <!-- About Tab -->
                <div x-show="activeTab === 'about'" class="space-y-6">
                    <!-- Bio Section -->
                    <div class="rounded-xl p-6" :class="darkMode ? 'bg-gray-800 border border-gray-700' : 'bg-white border border-gray-200'">
                        <h3 class="text-xl font-semibold mb-4">Bio & Other Details</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-medium mb-2" :class="darkMode ? 'text-gray-300' : 'text-gray-700'">Bio</h4>
                                <p class="mb-4" :class="darkMode ? 'text-gray-400' : 'text-gray-600'">
                                    {{ mentor.bio|default:"Experienced full-stack developer with 8+ years of experience in building scalable web applications. Passionate about teaching and helping others grow in their tech journey." }}
                                </p>
                                
                                <h4 class="font-medium mb-2" :class="darkMode ? 'text-gray-300' : 'text-gray-700'">Expertise Areas</h4>
                                <p class="mb-4" :class="darkMode ? 'text-gray-400' : 'text-gray-600'">
                                    {{ mentor.expertise|default:"Web Development, React, JavaScript" }}
                                </p>
                            </div>
                            <div>
                                <h4 class="font-medium mb-2" :class="darkMode ? 'text-gray-300' : 'text-gray-700'">Experience Level</h4>
                                <p class="mb-4" :class="darkMode ? 'text-gray-400' : 'text-gray-600'">Advanced</p>
                                
                                <h4 class="font-medium mb-2" :class="darkMode ? 'text-gray-300' : 'text-gray-700'">Hourly Rate</h4>
                                <p class="mb-4 text-2xl font-bold text-green-600">₹{{ mentor.hourly_rate|default:"65" }}/hour</p>
                                
                                <h4 class="font-medium mb-2" :class="darkMode ? 'text-gray-300' : 'text-gray-700'">Skills</h4>
                                <div class="flex flex-wrap gap-2">
                                    {% for skill in mentor.skills_list %}
                                        <span class="px-3 py-1 rounded-full text-sm" :class="darkMode ? 'bg-gray-700 text-gray-300' : 'bg-blue-100 text-blue-800'">
                                            {{ skill }}
                                        </span>
                                    {% empty %}
                                        <span class="px-3 py-1 rounded-full text-sm" :class="darkMode ? 'bg-gray-700 text-gray-300' : 'bg-blue-100 text-blue-800'">React</span>
                                        <span class="px-3 py-1 rounded-full text-sm" :class="darkMode ? 'bg-gray-700 text-gray-300' : 'bg-blue-100 text-blue-800'">Node.js</span>
                                        <span class="px-3 py-1 rounded-full text-sm" :class="darkMode ? 'bg-gray-700 text-gray-300' : 'bg-blue-100 text-blue-800'">Python</span>
                                        <span class="px-3 py-1 rounded-full text-sm" :class="darkMode ? 'bg-gray-700 text-gray-300' : 'bg-blue-100 text-blue-800'">AWS</span>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sessions Tab -->
                <div x-show="activeTab === 'sessions'" class="space-y-6">
                    <!-- Session Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div class="rounded-lg p-4" :class="darkMode ? 'bg-gray-800 border border-gray-700' : 'bg-white border border-gray-200'">
                            <div class="text-2xl font-bold text-blue-600">23</div>
                            <div class="text-sm" :class="darkMode ? 'text-gray-400' : 'text-gray-600'">Scheduled</div>
                        </div>
                        <div class="rounded-lg p-4" :class="darkMode ? 'bg-gray-800 border border-gray-700' : 'bg-white border border-gray-200'">
                            <div class="text-2xl font-bold text-green-600">67</div>
                            <div class="text-sm" :class="darkMode ? 'text-gray-400' : 'text-gray-600'">Completed</div>
                        </div>
                        <div class="rounded-lg p-4" :class="darkMode ? 'bg-gray-800 border border-gray-700' : 'bg-white border border-gray-200'">
                            <div class="text-2xl font-bold text-purple-600">5</div>
                            <div class="text-sm" :class="darkMode ? 'text-gray-400' : 'text-gray-600'">In Progress</div>
                        </div>
                    </div>

                    <!-- Recent Sessions -->
                    <div class="space-y-4">
                        <h3 class="text-xl font-semibold">Recent Sessions</h3>
                        
                        <div class="session-card rounded-xl p-6" :class="darkMode ? 'bg-gray-800 border border-gray-700' : 'bg-white border border-gray-200'">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <h4 class="text-lg font-semibold mb-2">React Advanced Patterns</h4>
                                    <p class="mb-3" :class="darkMode ? 'text-gray-400' : 'text-gray-600'">
                                        Deep dive into advanced React patterns including render props, higher-order components, and custom hooks.
                                    </p>
                                    <div class="flex items-center space-x-4 text-sm" :class="darkMode ? 'text-gray-400' : 'text-gray-600'">
                                        <span><i data-feather="calendar" class="h-4 w-4 inline mr-1"></i>Jan 25, 2024</span>
                                        <span><i data-feather="clock" class="h-4 w-4 inline mr-1"></i>2 hours</span>
                                        <span><i data-feather="users" class="h-4 w-4 inline mr-1"></i>8 students</span>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2 ml-4">
                                    <span class="px-3 py-1 rounded-full text-sm bg-green-100 text-green-800">Completed</span>
                                    <div class="flex text-yellow-400">
                                        <i class="fas fa-star text-sm"></i>
                                        <i class="fas fa-star text-sm"></i>
                                        <i class="fas fa-star text-sm"></i>
                                        <i class="fas fa-star text-sm"></i>
                                        <i class="fas fa-star text-sm"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="session-card rounded-xl p-6" :class="darkMode ? 'bg-gray-800 border border-gray-700' : 'bg-white border border-gray-200'">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <h4 class="text-lg font-semibold mb-2">JavaScript Fundamentals</h4>
                                    <p class="mb-3" :class="darkMode ? 'text-gray-400' : 'text-gray-600'">
                                        Complete guide to JavaScript basics including ES6+ features, async/await, and modern development practices.
                                    </p>
                                    <div class="flex items-center space-x-4 text-sm" :class="darkMode ? 'text-gray-400' : 'text-gray-600'">
                                        <span><i data-feather="calendar" class="h-4 w-4 inline mr-1"></i>Jan 28, 2024</span>
                                        <span><i data-feather="clock" class="h-4 w-4 inline mr-1"></i>1.5 hours</span>
                                        <span><i data-feather="users" class="h-4 w-4 inline mr-1"></i>12 students</span>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2 ml-4">
                                    <span class="px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800">Scheduled</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reviews Tab -->
                <div x-show="activeTab === 'reviews'" class="space-y-6">
                    <div class="flex items-center justify-between">
                        <h3 class="text-xl font-semibold">Student Reviews</h3>
                        <div class="flex items-center space-x-2">
                            <div class="flex text-yellow-400">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                            <span class="text-lg font-semibold">4.8</span>
                            <span class="text-sm" :class="darkMode ? 'text-gray-400' : 'text-gray-600'">(124 reviews)</span>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <div class="rounded-xl p-6" :class="darkMode ? 'bg-gray-800 border border-gray-700' : 'bg-white border border-gray-200'">
                            <div class="flex items-start space-x-4">
                                <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center text-white font-bold">
                                    MG
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center justify-between mb-2">
                                        <h5 class="font-semibold">Maria Garcia</h5>
                                        <div class="flex text-yellow-400">
                                            <i class="fas fa-star text-sm"></i>
                                            <i class="fas fa-star text-sm"></i>
                                            <i class="fas fa-star text-sm"></i>
                                            <i class="fas fa-star text-sm"></i>
                                            <i class="fas fa-star text-sm"></i>
                                        </div>
                                    </div>
                                    <p class="mb-2" :class="darkMode ? 'text-gray-400' : 'text-gray-600'">
                                        "Excellent mentor! Explained React concepts very clearly and provided practical examples. Highly recommended!"
                                    </p>
                                    <p class="text-sm" :class="darkMode ? 'text-gray-500' : 'text-gray-500'">2 days ago</p>
                                </div>
                            </div>
                        </div>

                        <div class="rounded-xl p-6" :class="darkMode ? 'bg-gray-800 border border-gray-700' : 'bg-white border border-gray-200'">
                            <div class="flex items-start space-x-4">
                                <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center text-white font-bold">
                                    AK
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center justify-between mb-2">
                                        <h5 class="font-semibold">Anita Kumar</h5>
                                        <div class="flex text-yellow-400">
                                            <i class="fas fa-star text-sm"></i>
                                            <i class="fas fa-star text-sm"></i>
                                            <i class="fas fa-star text-sm"></i>
                                            <i class="fas fa-star text-sm"></i>
                                            <i class="far fa-star text-sm"></i>
                                        </div>
                                    </div>
                                    <p class="mb-2" :class="darkMode ? 'text-gray-400' : 'text-gray-600'">
                                        "Great session on JavaScript fundamentals. Very patient and helpful throughout the learning process."
                                    </p>
                                    <p class="text-sm" :class="darkMode ? 'text-gray-500' : 'text-gray-500'">1 week ago</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Activity Tab -->
                <div x-show="activeTab === 'activity'" class="space-y-6">
                    <h3 class="text-xl font-semibold">Recent Activity</h3>
                    
                    <div class="space-y-4">
                        <div class="flex items-center space-x-4 p-4 rounded-lg" :class="darkMode ? 'bg-gray-800 border border-gray-700' : 'bg-white border border-gray-200'">
                            <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center">
                                <i data-feather="check" class="h-5 w-5 text-white"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium">Completed session: React Advanced Patterns</p>
                                <p class="text-sm" :class="darkMode ? 'text-gray-400' : 'text-gray-600'">2 hours ago</p>
                            </div>
                        </div>

                        <div class="flex items-center space-x-4 p-4 rounded-lg" :class="darkMode ? 'bg-gray-800 border border-gray-700' : 'bg-white border border-gray-200'">
                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center">
                                <i data-feather="user-plus" class="h-5 w-5 text-white"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium">New follower: Mike Chen</p>
                                <p class="text-sm" :class="darkMode ? 'text-gray-400' : 'text-gray-600'">5 hours ago</p>
                            </div>
                        </div>

                        <div class="flex items-center space-x-4 p-4 rounded-lg" :class="darkMode ? 'bg-gray-800 border border-gray-700' : 'bg-white border border-gray-200'">
                            <div class="w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center">
                                <i data-feather="star" class="h-5 w-5 text-white"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium">Received 5-star rating from Sarah Johnson</p>
                                <p class="text-sm" :class="darkMode ? 'text-gray-400' : 'text-gray-600'">1 day ago</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="space-y-6">
                
                <!-- Social Media -->
                <div class="rounded-xl p-6" :class="darkMode ? 'bg-gray-800 border border-gray-700' : 'bg-white border border-gray-200'">
                    <h3 class="text-lg font-semibold mb-4">Social Media</h3>
                    <div class="flex space-x-3">
                        <a href="#" class="w-10 h-10 bg-red-600 rounded-full flex items-center justify-center text-white hover:bg-red-700 transition-colors">
                            <i class="fab fa-youtube"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-pink-600 rounded-full flex items-center justify-center text-white hover:bg-pink-700 transition-colors">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-gray-900 rounded-full flex items-center justify-center text-white hover:bg-gray-800 transition-colors">
                            <i class="fab fa-tiktok"></i>
                        </a>
                    </div>
                </div>

                <!-- Quick Actions -->
                {% if request.user == mentor %}
                <div class="rounded-xl p-6" :class="darkMode ? 'bg-gray-800 border border-gray-700' : 'bg-white border border-gray-200'">
                    <h3 class="text-lg font-semibold mb-4">Quick Actions</h3>
                    <div class="space-y-3">
                        <button class="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors">
                            Edit Profile
                        </button>
                        <button class="w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors">
                            Create Session
                        </button>
                        <button class="w-full py-2 px-4 rounded-lg transition-colors" :class="darkMode ? 'bg-gray-700 text-gray-300 hover:bg-gray-600' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'">
                            View Analytics
                        </button>
                    </div>
                </div>
                {% endif %}

                <!-- Achievements -->
                <div class="rounded-xl p-6" :class="darkMode ? 'bg-gray-800 border border-gray-700' : 'bg-white border border-gray-200'">
                    <h3 class="text-lg font-semibold mb-4">Achievements</h3>
                    <div class="space-y-3">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-crown text-white text-sm"></i>
                            </div>
                            <span class="font-medium">Top Mentor</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-graduation-cap text-white text-sm"></i>
                            </div>
                            <span class="font-medium">100+ Sessions</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-star text-white text-sm"></i>
                            </div>
                            <span class="font-medium">5-Star Rating</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Upload Modal -->
    <div x-show="showImageUpload" 
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="fixed inset-0 z-50 overflow-y-auto" 
         x-cloak>
        <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>

            <div class="inline-block align-bottom rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"
                 :class="darkMode ? 'bg-gray-800' : 'bg-white'">
                <div class="px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <h3 class="text-lg font-medium mb-4">Upload Profile Image</h3>
                    
                    <div class="mb-4">
                        <input type="file" @change="handleImageSelect" accept="image/*" 
                               class="block w-full text-sm border rounded-lg cursor-pointer"
                               :class="darkMode ? 'bg-gray-700 border-gray-600 text-gray-300' : 'bg-gray-50 border-gray-300 text-gray-900'">
                    </div>
                    
                    <div x-show="selectedImage" class="mb-4">
                        <div id="image-preview" class="max-w-full h-64 overflow-hidden rounded-lg"></div>
                    </div>
                </div>
                
                <div class="px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button @click="uploadImage" 
                            x-show="selectedImage"
                            class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm">
                        Upload
                    </button>
                    <button @click="showImageUpload = false; resetImageUpload()" 
                            class="mt-3 w-full inline-flex justify-center rounded-md border shadow-sm px-4 py-2 text-base font-medium focus:outline-none sm:mt-0 sm:w-auto sm:text-sm"
                            :class="darkMode ? 'border-gray-600 bg-gray-700 text-gray-300 hover:bg-gray-600' : 'border-gray-300 bg-white text-gray-700 hover:bg-gray-50'">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function profileData() {
            return {
                activeTab: 'about',
                showImageUpload: false,
                selectedImage: null,
                cropper: null,

                handleImageSelect(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            this.selectedImage = e.target.result;
                            this.$nextTick(() => {
                                this.initCropper();
                            });
                        };
                        reader.readAsDataURL(file);
                    }
                },

                initCropper() {
                    const imagePreview = document.getElementById('image-preview');
                    imagePreview.innerHTML = '<img id="crop-image" src="' + this.selectedImage + '" style="max-width: 100%;">';
                    
                    const image = document.getElementById('crop-image');
                    this.cropper = new Cropper(image, {
                        aspectRatio: 1,
                        viewMode: 1,
                        dragMode: 'move',
                        autoCropArea: 0.8,
                        restore: false,
                        guides: false,
                        center: false,
                        highlight: false,
                        cropBoxMovable: false,
                        cropBoxResizable: false,
                        toggleDragModeOnDblclick: false,
                    });
                },

                async uploadImage() {
                    if (this.cropper) {
                        const canvas = this.cropper.getCroppedCanvas({
                            width: 400,
                            height: 400,
                        });
                        
                        canvas.toBlob(async (blob) => {
                            const formData = new FormData();
                            formData.append('profile_image', blob, 'profile.jpg');
                            
                            try {
                                const response = await fetch('/profile/upload-image/', {
                                    method: 'POST',
                                    body: formData,
                                    headers: {
                                        'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
                                    }
                                });
                                
                                if (response.ok) {
                                    location.reload();
                                } else {
                                    alert('Upload failed. Please try again.');
                                }
                            } catch (error) {
                                alert('Upload failed. Please try again.');
                            }
                        }, 'image/jpeg', 0.8);
                    }
                },

                resetImageUpload() {
                    this.selectedImage = null;
                    if (this.cropper) {
                        this.cropper.destroy();
                        this.cropper = null;
                    }
                    document.getElementById('image-preview').innerHTML = '';
                }
            }
        }

        // Initialize Feather icons
        document.addEventListener('DOMContentLoaded', function() {
            feather.replace();
        });
    </script>
</body>
</html>