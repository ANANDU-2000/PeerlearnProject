<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Admin Dashboard - PeerLearn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .blue-gradient { background: linear-gradient(135deg, #0056d3 0%, #4285f4 100%); }
        .glass-effect { backdrop-filter: blur(20px); background: rgba(255, 255, 255, 0.1); }
        .slide-up { animation: slideUp 0.6s ease-out; }
        .fade-in { animation: fadeIn 0.8s ease-out; }
        .bounce-in { animation: bounceIn 1s ease-out; }
        .pulse-ring { animation: pulse-ring 1.25s cubic-bezier(0.215, 0.61, 0.355, 1) infinite; }
        .floating { animation: floating 3s ease-in-out infinite; }
        .shimmer { animation: shimmer 2s infinite; }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes pulse-ring {
            0% { transform: scale(.33); }
            80%, 100% { opacity: 0; }
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes shimmer {
            0% { background-position: -468px 0; }
            100% { background-position: 468px 0; }
        }
        
        .online-indicator {
            position: relative;
        }
        
        .online-indicator::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: #10b981;
            animation: pulse-ring 1.25s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
        }
        
        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #f3f4f6, #e5e7eb, #f3f4f6);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        
        .stat-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        .sidebar-tab {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        
        .sidebar-tab:hover {
            background: rgba(0, 86, 211, 0.1);
            border-left-color: #0056d3;
        }
        
        .sidebar-tab.active {
            background: rgba(0, 86, 211, 0.15);
            border-left-color: #0056d3;
            color: #0056d3;
        }
        
        .modal-backdrop {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }
        
        .ai-chat-bubble {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            color: white;
            padding: 12px 20px;
            margin: 8px 0;
            max-width: 80%;
            word-wrap: break-wrap;
            animation: slideUp 0.3s ease;
        }
        
        .user-chat-bubble {
            background: linear-gradient(135deg, #0056d3 0%, #4285f4 100%);
            border-radius: 20px;
            color: white;
            padding: 12px 20px;
            margin: 8px 0;
            max-width: 80%;
            margin-left: auto;
            text-align: right;
            animation: slideUp 0.3s ease;
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 16px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #94a3b8;
            margin: 0 2px;
            animation: typing 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }
        
        .real-time-update {
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 5px #4285f4; }
            to { box-shadow: 0 0 20px #4285f4, 0 0 30px #4285f4; }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen" x-data="adminDashboard()">
    <!-- Header -->
    <header class="blue-gradient text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-full mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <div class="w-10 h-10 blue-gradient rounded-lg flex items-center justify-center mr-4 floating">
                        <i class="fas fa-crown text-yellow-300 text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold">PeerLearn Admin Control Center</h1>
                        <p class="text-sm opacity-90">Advanced Management Dashboard</p>
                    </div>
                    {% if is_owner %}
                        <span class="ml-4 bg-yellow-400 text-blue-900 px-3 py-1 rounded-full text-sm font-bold animate-pulse">OWNER</span>
                    {% endif %}
                </div>
                
                <div class="flex items-center space-x-4">
                    <!-- Real-time Notifications -->
                    <div class="relative">
                        <button @click="showNotifications = !showNotifications" class="bg-white bg-opacity-20 hover:bg-opacity-30 p-3 rounded-lg transition-all">
                            <i class="fas fa-bell text-xl"></i>
                            <span class="notification-badge" x-show="unreadNotifications > 0" x-text="unreadNotifications"></span>
                        </button>
                    </div>
                    
                    <!-- AI Chat Toggle -->
                    <button @click="toggleAiChat()" class="bg-white bg-opacity-20 hover:bg-opacity-30 p-3 rounded-lg transition-all">
                        <i class="fas fa-robot text-xl"></i>
                    </button>
                    
                    <!-- Real-time Performance -->
                    <div class="text-right hidden md:block">
                        <p class="text-sm opacity-90">Server Load</p>
                        <div class="flex items-center">
                            <div class="w-2 h-2 bg-green-400 rounded-full mr-1 online-indicator"></div>
                            <span class="font-semibold real-time-update" x-text="serverLoad + '%'">45%</span>
                        </div>
                    </div>
                    
                    <!-- User Profile -->
                    <div class="flex items-center space-x-3">
                        <div class="text-right">
                            <p class="text-sm opacity-90">Welcome back,</p>
                            <p class="font-semibold">{{ user.get_full_name|default:user.username }}</p>
                        </div>
                        <div class="w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                            {% if user.profile_image %}
                                <img src="{{ user.profile_image.url }}" alt="Profile" class="w-full h-full rounded-full object-cover">
                            {% else %}
                                <i class="fas fa-user-shield text-xl"></i>
                            {% endif %}
                        </div>
                        <button @click="showUserMenu = !showUserMenu" class="bg-white bg-opacity-20 hover:bg-opacity-30 p-2 rounded-lg transition-all">
                            <i class="fas fa-chevron-down"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Real-time Stats Bar -->
        <div class="bg-white bg-opacity-10 py-2">
            <div class="max-w-full mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center text-sm">
                    <div class="flex space-x-6">
                        <span><i class="fas fa-users mr-1"></i>Online: <span class="font-bold real-time-update" x-text="onlineUsers">{{ online_count }}</span></span>
                        <span><i class="fas fa-chart-line mr-1"></i>Sessions Active: <span class="font-bold real-time-update" x-text="activeSessions">12</span></span>
                        <span><i class="fas fa-dollar-sign mr-1"></i>Revenue Today: <span class="font-bold real-time-update" x-text="'₹' + todayRevenue">₹45,680</span></span>
                        <span><i class="fas fa-exclamation-triangle mr-1"></i>Alerts: <span class="font-bold real-time-update text-yellow-300" x-text="systemAlerts">3</span></span>
                    </div>
                    <div class="text-xs opacity-75">
                        Last Update: <span x-text="lastUpdate">{{ now|date:"H:i:s" }}</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="flex">
        <!-- Advanced Sidebar -->
        <aside class="w-72 bg-white shadow-lg min-h-screen">
            <div class="p-6">
                <nav class="space-y-2">
                    <!-- Dashboard Overview -->
                    <div class="sidebar-tab p-3 rounded-lg cursor-pointer" :class="{'active': activeTab === 'overview'}" @click="activeTab = 'overview'">
                        <div class="flex items-center">
                            <i class="fas fa-tachometer-alt w-5 text-lg mr-3"></i>
                            <span class="font-medium">Dashboard Overview</span>
                            <span class="ml-auto bg-blue-100 text-blue-600 px-2 py-1 rounded-full text-xs">Live</span>
                        </div>
                    </div>
                    
                    <!-- User Management -->
                    <div class="sidebar-tab p-3 rounded-lg cursor-pointer" :class="{'active': activeTab === 'users'}" @click="activeTab = 'users'">
                        <div class="flex items-center">
                            <i class="fas fa-users-cog w-5 text-lg mr-3"></i>
                            <span class="font-medium">User Management</span>
                            <span class="ml-auto bg-red-100 text-red-600 px-2 py-1 rounded-full text-xs" x-text="pendingUsers">24</span>
                        </div>
                    </div>
                    
                    <!-- Session Control -->
                    <div class="sidebar-tab p-3 rounded-lg cursor-pointer" :class="{'active': activeTab === 'sessions'}" @click="activeTab = 'sessions'">
                        <div class="flex items-center">
                            <i class="fas fa-video w-5 text-lg mr-3"></i>
                            <span class="font-medium">Session Control</span>
                            <span class="ml-auto bg-green-100 text-green-600 px-2 py-1 rounded-full text-xs" x-text="liveSessions">8</span>
                        </div>
                    </div>
                    
                    <!-- Analytics & Reports -->
                    <div class="sidebar-tab p-3 rounded-lg cursor-pointer" :class="{'active': activeTab === 'analytics'}" @click="activeTab = 'analytics'">
                        <div class="flex items-center">
                            <i class="fas fa-chart-pie w-5 text-lg mr-3"></i>
                            <span class="font-medium">Analytics & Reports</span>
                            <span class="ml-auto bg-purple-100 text-purple-600 px-2 py-1 rounded-full text-xs">Pro</span>
                        </div>
                    </div>
                    
                    <!-- Financial Management -->
                    <div class="sidebar-tab p-3 rounded-lg cursor-pointer" :class="{'active': activeTab === 'finance'}" @click="activeTab = 'finance'">
                        <div class="flex items-center">
                            <i class="fas fa-rupee-sign w-5 text-lg mr-3"></i>
                            <span class="font-medium">Financial Management</span>
                            <span class="ml-auto bg-yellow-100 text-yellow-600 px-2 py-1 rounded-full text-xs">₹</span>
                        </div>
                    </div>
                    
                    <!-- Communication Center -->
                    <div class="sidebar-tab p-3 rounded-lg cursor-pointer" :class="{'active': activeTab === 'communication'}" @click="activeTab = 'communication'">
                        <div class="flex items-center">
                            <i class="fas fa-envelope w-5 text-lg mr-3"></i>
                            <span class="font-medium">Communication Center</span>
                            <span class="ml-auto bg-blue-100 text-blue-600 px-2 py-1 rounded-full text-xs">Mail</span>
                        </div>
                    </div>
                    
                    <!-- Content Moderation -->
                    <div class="sidebar-tab p-3 rounded-lg cursor-pointer" :class="{'active': activeTab === 'moderation'}" @click="activeTab = 'moderation'">
                        <div class="flex items-center">
                            <i class="fas fa-shield-alt w-5 text-lg mr-3"></i>
                            <span class="font-medium">Content Moderation</span>
                            <span class="ml-auto bg-red-100 text-red-600 px-2 py-1 rounded-full text-xs" x-text="flaggedContent">7</span>
                        </div>
                    </div>
                    
                    <!-- System Settings -->
                    <div class="sidebar-tab p-3 rounded-lg cursor-pointer" :class="{'active': activeTab === 'settings'}" @click="activeTab = 'settings'">
                        <div class="flex items-center">
                            <i class="fas fa-cogs w-5 text-lg mr-3"></i>
                            <span class="font-medium">System Settings</span>
                            <span class="ml-auto bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs">Config</span>
                        </div>
                    </div>
                    
                    <!-- AI & Automation -->
                    <div class="sidebar-tab p-3 rounded-lg cursor-pointer" :class="{'active': activeTab === 'ai'}" @click="activeTab = 'ai'">
                        <div class="flex items-center">
                            <i class="fas fa-robot w-5 text-lg mr-3"></i>
                            <span class="font-medium">AI & Automation</span>
                            <span class="ml-auto bg-indigo-100 text-indigo-600 px-2 py-1 rounded-full text-xs">AI</span>
                        </div>
                    </div>
                    
                    {% if is_owner %}
                    <!-- Owner Controls -->
                    <div class="border-t pt-4 mt-4">
                        <div class="sidebar-tab p-3 rounded-lg cursor-pointer bg-gradient-to-r from-yellow-400 to-orange-500 text-white" :class="{'active': activeTab === 'owner'}" @click="activeTab = 'owner'">
                            <div class="flex items-center">
                                <i class="fas fa-crown w-5 text-lg mr-3"></i>
                                <span class="font-medium">Owner Controls</span>
                                <span class="ml-auto bg-white bg-opacity-20 px-2 py-1 rounded-full text-xs">Elite</span>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </nav>
                
                <!-- Quick Actions -->
                <div class="mt-8 p-4 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg text-white">
                    <h3 class="font-bold mb-3">Quick Actions</h3>
                    <div class="space-y-2">
                        <button @click="sendBulkEmail()" class="w-full bg-white bg-opacity-20 hover:bg-opacity-30 py-2 px-3 rounded text-sm transition-all">
                            <i class="fas fa-paper-plane mr-2"></i>Send Bulk Email
                        </button>
                        <button @click="generateReport()" class="w-full bg-white bg-opacity-20 hover:bg-opacity-30 py-2 px-3 rounded text-sm transition-all">
                            <i class="fas fa-file-alt mr-2"></i>Generate Report
                        </button>
                        <button @click="emergencyAlert()" class="w-full bg-red-500 hover:bg-red-600 py-2 px-3 rounded text-sm transition-all">
                            <i class="fas fa-exclamation-triangle mr-2"></i>Emergency Alert
                        </button>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 p-6">
            <!-- Dashboard Overview Tab -->
            <div x-show="activeTab === 'overview'" class="slide-up">
                <!-- Real-time Metrics Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <!-- Total Users -->
                    <div class="stat-card rounded-xl p-6 bounce-in">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600 font-medium">Total Users</p>
                                <p class="text-3xl font-bold text-gray-900 real-time-update" x-text="totalUsers">{{ total_users }}</p>
                                <p class="text-sm text-green-600 mt-1">
                                    <i class="fas fa-arrow-up mr-1"></i>
                                    <span x-text="userGrowth">+12.5%</span> from last month
                                </p>
                            </div>
                            <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center">
                                <i class="fas fa-users text-2xl text-blue-600"></i>
                            </div>
                        </div>
                        <div class="mt-4">
                            <div class="progress-bar h-2 bg-gray-200 rounded-full">
                                <div class="h-full bg-blue-500 rounded-full" style="width: 75%"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Active Sessions -->
                    <div class="stat-card rounded-xl p-6 bounce-in" style="animation-delay: 0.1s;">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600 font-medium">Active Sessions</p>
                                <p class="text-3xl font-bold text-gray-900 real-time-update" x-text="activeSessions">{{ active_sessions }}</p>
                                <p class="text-sm text-green-600 mt-1">
                                    <i class="fas fa-arrow-up mr-1"></i>
                                    <span x-text="sessionGrowth">+8.3%</span> from yesterday
                                </p>
                            </div>
                            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center">
                                <i class="fas fa-video text-2xl text-green-600"></i>
                            </div>
                        </div>
                        <div class="mt-4">
                            <div class="progress-bar h-2 bg-gray-200 rounded-full">
                                <div class="h-full bg-green-500 rounded-full" style="width: 60%"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Revenue Today -->
                    <div class="stat-card rounded-xl p-6 bounce-in" style="animation-delay: 0.2s;">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600 font-medium">Revenue Today</p>
                                <p class="text-3xl font-bold text-gray-900 real-time-update">₹<span x-text="todayRevenue">45,680</span></p>
                                <p class="text-sm text-green-600 mt-1">
                                    <i class="fas fa-arrow-up mr-1"></i>
                                    <span x-text="revenueGrowth">+15.2%</span> from avg
                                </p>
                            </div>
                            <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center">
                                <i class="fas fa-rupee-sign text-2xl text-yellow-600"></i>
                            </div>
                        </div>
                        <div class="mt-4">
                            <div class="progress-bar h-2 bg-gray-200 rounded-full">
                                <div class="h-full bg-yellow-500 rounded-full" style="width: 85%"></div>
                            </div>
                        </div>
                    </div>

                    <!-- System Health -->
                    <div class="stat-card rounded-xl p-6 bounce-in" style="animation-delay: 0.3s;">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600 font-medium">System Health</p>
                                <p class="text-3xl font-bold text-green-600 real-time-update" x-text="systemHealth + '%'">98.5%</p>
                                <p class="text-sm text-green-600 mt-1">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    All systems operational
                                </p>
                            </div>
                            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center">
                                <i class="fas fa-heartbeat text-2xl text-green-600"></i>
                            </div>
                        </div>
                        <div class="mt-4">
                            <div class="progress-bar h-2 bg-gray-200 rounded-full">
                                <div class="h-full bg-green-500 rounded-full" style="width: 98%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Real-time Charts -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                    <!-- User Activity Chart -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Real-time User Activity</h3>
                            <div class="flex space-x-2">
                                <span class="w-3 h-3 bg-blue-500 rounded-full"></span>
                                <span class="text-sm text-gray-600">Live Updates</span>
                            </div>
                        </div>
                        <canvas id="userActivityChart" class="w-full h-64"></canvas>
                    </div>

                    <!-- Revenue Chart -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Revenue Analytics</h3>
                            <select class="border rounded-lg px-3 py-1 text-sm" @change="updateRevenueChart($event.target.value)">
                                <option value="today">Today</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                            </select>
                        </div>
                        <canvas id="revenueChart" class="w-full h-64"></canvas>
                    </div>
                </div>

                <!-- Live Activity Feed -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Live Activity Feed</h3>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                            <span class="text-sm text-gray-600">Live</span>
                        </div>
                    </div>
                    <div class="space-y-4 max-h-96 overflow-y-auto" id="activityFeed">
                        <template x-for="activity in liveActivities" :key="activity.id">
                            <div class="flex items-center p-3 bg-gray-50 rounded-lg fade-in">
                                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                    <i :class="activity.icon" class="text-blue-600 text-sm"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm text-gray-900" x-text="activity.message"></p>
                                    <p class="text-xs text-gray-500" x-text="activity.timestamp"></p>
                                </div>
                                <span :class="activity.statusColor" class="px-2 py-1 text-xs rounded-full" x-text="activity.status"></span>
                            </div>
                        </template>
                    </div>
                </div>
            </div>

            <!-- User Management Tab -->
            <div x-show="activeTab === 'users'" class="slide-up">
                <!-- User Management Header -->
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900">Advanced User Management</h2>
                        <p class="text-gray-600">Comprehensive user control and analytics</p>
                    </div>
                    <div class="flex space-x-3">
                        <button @click="exportUsers()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-all">
                            <i class="fas fa-download mr-2"></i>Export Users
                        </button>
                        <button @click="showAddUserModal = true" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all">
                            <i class="fas fa-user-plus mr-2"></i>Add User
                        </button>
                        <button @click="bulkActions = !bulkActions" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-all">
                            <i class="fas fa-tasks mr-2"></i>Bulk Actions
                        </button>
                    </div>
                </div>

                <!-- User Statistics Cards -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                    <div class="bg-white rounded-lg p-6 shadow-lg border-l-4 border-blue-500">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                                <i class="fas fa-users text-blue-600 text-xl"></i>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-gray-900" x-text="userStats.total">{{ total_users }}</p>
                                <p class="text-sm text-gray-600">Total Users</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg p-6 shadow-lg border-l-4 border-green-500">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4">
                                <i class="fas fa-chalkboard-teacher text-green-600 text-xl"></i>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-gray-900" x-text="userStats.mentors">{{ total_mentors }}</p>
                                <p class="text-sm text-gray-600">Mentors</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg p-6 shadow-lg border-l-4 border-purple-500">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4">
                                <i class="fas fa-graduation-cap text-purple-600 text-xl"></i>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-gray-900" x-text="userStats.learners">{{ total_learners }}</p>
                                <p class="text-sm text-gray-600">Learners</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg p-6 shadow-lg border-l-4 border-yellow-500">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center mr-4">
                                <div class="w-3 h-3 bg-green-500 rounded-full online-indicator"></div>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-gray-900" x-text="userStats.online">{{ online_count }}</p>
                                <p class="text-sm text-gray-600">Online Now</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Filters -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <div class="flex flex-wrap items-center gap-4">
                        <div class="flex-1 min-w-64">
                            <input type="text" placeholder="Search users..." class="w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" x-model="userSearch">
                        </div>
                        <select class="border rounded-lg px-4 py-2" x-model="userRoleFilter">
                            <option value="">All Roles</option>
                            <option value="learner">Learners</option>
                            <option value="mentor">Mentors</option>
                            <option value="admin">Admins</option>
                        </select>
                        <select class="border rounded-lg px-4 py-2" x-model="userStatusFilter">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                            <option value="banned">Banned</option>
                            <option value="suspended">Suspended</option>
                        </select>
                        <button @click="refreshUsers()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all">
                            <i class="fas fa-sync-alt mr-2"></i>Refresh
                        </button>
                    </div>
                </div>

                <!-- Users Table -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg font-semibold text-gray-900">User Database</h3>
                            <div class="flex items-center space-x-4">
                                <span class="text-sm text-gray-600">
                                    Showing <span x-text="userPagination.start">1</span>-<span x-text="userPagination.end">20</span> of <span x-text="userPagination.total">{{ total_users }}</span>
                                </span>
                                <div class="flex space-x-1">
                                    <button @click="previousPage()" class="p-1 border rounded hover:bg-gray-50" :disabled="userPagination.currentPage === 1">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button @click="nextPage()" class="p-1 border rounded hover:bg-gray-50" :disabled="userPagination.currentPage === userPagination.totalPages">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        <input type="checkbox" @change="selectAllUsers($event.target.checked)" class="rounded">
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">User</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Role</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Joined</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Last Activity</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <template x-for="user in filteredUsers" :key="user.id">
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <input type="checkbox" :value="user.id" x-model="selectedUsers" class="rounded">
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="w-10 h-10 rounded-full overflow-hidden mr-4">
                                                    <img :src="user.profile_image || '/static/images/default-avatar.png'" :alt="user.name" class="w-full h-full object-cover">
                                                </div>
                                                <div>
                                                    <div class="text-sm font-medium text-gray-900" x-text="user.name"></div>
                                                    <div class="text-sm text-gray-500" x-text="user.email"></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span :class="getRoleClass(user.role)" class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full" x-text="user.role"></span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div :class="getStatusColor(user.status)" class="w-2 h-2 rounded-full mr-2"></div>
                                                <span class="text-sm text-gray-900" x-text="user.status"></span>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" x-text="user.joined"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" x-text="user.lastActivity"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <div class="flex space-x-2">
                                                <button @click="viewUser(user)" class="text-blue-600 hover:text-blue-900" title="View Profile">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button @click="editUser(user)" class="text-green-600 hover:text-green-900" title="Edit User">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button @click="suspendUser(user)" class="text-yellow-600 hover:text-yellow-900" title="Suspend User">
                                                    <i class="fas fa-pause"></i>
                                                </button>
                                                <button @click="banUser(user)" class="text-red-600 hover:text-red-900" title="Ban User">
                                                    <i class="fas fa-ban"></i>
                                                </button>
                                                <button @click="deleteUser(user)" class="text-red-800 hover:text-red-900" title="Delete User">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Bulk Actions Panel -->
                <div x-show="bulkActions" class="mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                    <div class="flex items-center justify-between">
                        <div>
                            <h4 class="font-semibold text-yellow-800">Bulk Actions</h4>
                            <p class="text-sm text-yellow-700">
                                <span x-text="selectedUsers.length"></span> users selected
                            </p>
                        </div>
                        <div class="flex space-x-2">
                            <button @click="bulkSuspend()" class="bg-yellow-600 text-white px-3 py-1 rounded text-sm hover:bg-yellow-700">
                                <i class="fas fa-pause mr-1"></i>Suspend
                            </button>
                            <button @click="bulkActivate()" class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">
                                <i class="fas fa-play mr-1"></i>Activate
                            </button>
                            <button @click="bulkEmail()" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                <i class="fas fa-envelope mr-1"></i>Email
                            </button>
                            <button @click="bulkDelete()" class="bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700">
                                <i class="fas fa-trash mr-1"></i>Delete
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Session Control Tab -->
            <div x-show="activeTab === 'sessions'" class="slide-up">
                <!-- Session Control Header -->
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900">Live Session Control</h2>
                        <p class="text-gray-600">Monitor and manage all platform sessions</p>
                    </div>
                    <div class="flex space-x-3">
                        <button @click="refreshSessions()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all">
                            <i class="fas fa-sync-alt mr-2"></i>Refresh
                        </button>
                        <button @click="emergencyStopAll()" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-all">
                            <i class="fas fa-stop-circle mr-2"></i>Emergency Stop All
                        </button>
                    </div>
                </div>

                <!-- Session Statistics -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                    <div class="bg-white rounded-lg p-6 shadow-lg">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4">
                                <i class="fas fa-play-circle text-green-600 text-xl"></i>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-gray-900 real-time-update" x-text="sessionStats.live">8</p>
                                <p class="text-sm text-gray-600">Live Sessions</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg p-6 shadow-lg">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                                <i class="fas fa-calendar text-blue-600 text-xl"></i>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-gray-900" x-text="sessionStats.scheduled">24</p>
                                <p class="text-sm text-gray-600">Scheduled Today</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg p-6 shadow-lg">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4">
                                <i class="fas fa-users text-purple-600 text-xl"></i>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-gray-900 real-time-update" x-text="sessionStats.participants">156</p>
                                <p class="text-sm text-gray-600">Active Participants</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg p-6 shadow-lg">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center mr-4">
                                <i class="fas fa-clock text-yellow-600 text-xl"></i>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-gray-900" x-text="sessionStats.avgDuration">45m</p>
                                <p class="text-sm text-gray-600">Avg Duration</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Live Sessions Table -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-900">Live Sessions Monitor</h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Session</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mentor</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Participants</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Duration</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quality</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <template x-for="session in liveSessions" :key="session.id">
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900" x-text="session.title"></div>
                                                <div class="text-sm text-gray-500" x-text="session.id"></div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="w-8 h-8 rounded-full overflow-hidden mr-3">
                                                    <img :src="session.mentor.avatar" :alt="session.mentor.name" class="w-full h-full object-cover">
                                                </div>
                                                <span class="text-sm text-gray-900" x-text="session.mentor.name"></span>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <span class="text-sm text-gray-900" x-text="session.participants.current + '/' + session.participants.max"></span>
                                                <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                    <div class="bg-blue-500 h-2 rounded-full" :style="'width: ' + (session.participants.current / session.participants.max * 100) + '%'"></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900" x-text="session.duration"></td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div :class="getQualityColor(session.quality)" class="w-2 h-2 rounded-full mr-2"></div>
                                                <span class="text-sm text-gray-900" x-text="session.quality"></span>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <div class="flex space-x-2">
                                                <button @click="monitorSession(session)" class="text-blue-600 hover:text-blue-900" title="Monitor">
                                                    <i class="fas fa-tv"></i>
                                                </button>
                                                <button @click="joinSession(session)" class="text-green-600 hover:text-green-900" title="Join">
                                                    <i class="fas fa-sign-in-alt"></i>
                                                </button>
                                                <button @click="recordSession(session)" class="text-purple-600 hover:text-purple-900" title="Record">
                                                    <i class="fas fa-record-vinyl"></i>
                                                </button>
                                                <button @click="endSession(session)" class="text-red-600 hover:text-red-900" title="End Session">
                                                    <i class="fas fa-stop"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Communication Center Tab -->
            <div x-show="activeTab === 'communication'" class="slide-up">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Bulk Email Panel -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-6">Bulk Email Campaign</h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Recipients</label>
                                <select x-model="emailRecipients" class="w-full border rounded-lg px-3 py-2">
                                    <option value="all">All Users</option>
                                    <option value="learners">All Learners</option>
                                    <option value="mentors">All Mentors</option>
                                    <option value="active">Active Users Only</option>
                                    <option value="custom">Custom Selection</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Subject</label>
                                <input type="text" x-model="emailSubject" placeholder="Email subject..." class="w-full border rounded-lg px-3 py-2">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Message</label>
                                <textarea x-model="emailMessage" rows="8" placeholder="Email content..." class="w-full border rounded-lg px-3 py-2"></textarea>
                            </div>
                            
                            <div class="flex space-x-3">
                                <button @click="previewEmail()" class="flex-1 bg-gray-600 text-white py-2 rounded-lg hover:bg-gray-700 transition-all">
                                    <i class="fas fa-eye mr-2"></i>Preview
                                </button>
                                <button @click="sendBulkEmail()" class="flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-all">
                                    <i class="fas fa-paper-plane mr-2"></i>Send Email
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Push Notifications Panel -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-6">Push Notifications</h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Notification Type</label>
                                <select x-model="notificationType" class="w-full border rounded-lg px-3 py-2">
                                    <option value="info">Information</option>
                                    <option value="warning">Warning</option>
                                    <option value="success">Success</option>
                                    <option value="error">Error</option>
                                    <option value="urgent">Urgent</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                                <input type="text" x-model="notificationTitle" placeholder="Notification title..." class="w-full border rounded-lg px-3 py-2">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Message</label>
                                <textarea x-model="notificationMessage" rows="4" placeholder="Notification message..." class="w-full border rounded-lg px-3 py-2"></textarea>
                            </div>
                            
                            <div>
                                <label class="flex items-center">
                                    <input type="checkbox" x-model="notificationSound" class="rounded mr-2">
                                    <span class="text-sm text-gray-700">Play notification sound</span>
                                </label>
                            </div>
                            
                            <button @click="sendNotification()" class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition-all">
                                <i class="fas fa-bell mr-2"></i>Send Notification
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Communication History -->
                <div class="mt-6 bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-6">Communication History</h3>
                    <div class="space-y-4 max-h-96 overflow-y-auto">
                        <template x-for="comm in communicationHistory" :key="comm.id">
                            <div class="flex items-center p-4 bg-gray-50 rounded-lg">
                                <div :class="getCommunicationIcon(comm.type)" class="w-8 h-8 rounded-full flex items-center justify-center mr-4">
                                    <i :class="comm.icon" class="text-white text-sm"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <p class="font-medium text-gray-900" x-text="comm.subject"></p>
                                            <p class="text-sm text-gray-600" x-text="comm.recipients"></p>
                                        </div>
                                        <div class="text-right">
                                            <p class="text-sm text-gray-500" x-text="comm.timestamp"></p>
                                            <span :class="comm.statusColor" class="px-2 py-1 text-xs rounded-full" x-text="comm.status"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </div>

            <!-- AI & Automation Tab -->
            <div x-show="activeTab === 'ai'" class="slide-up">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- AI Configuration -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-6">AI Configuration</h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">AI Provider</label>
                                <select x-model="aiProvider" class="w-full border rounded-lg px-3 py-2">
                                    <option value="groq">Groq API</option>
                                    <option value="openai">OpenAI</option>
                                    <option value="anthropic">Anthropic</option>
                                </select>
                            </div>
                            
                            <div x-show="!aiApiKey">
                                <label class="block text-sm font-medium text-gray-700 mb-2">API Key</label>
                                <div class="flex space-x-2">
                                    <input type="password" x-model="tempApiKey" placeholder="Enter your Groq API key..." class="flex-1 border rounded-lg px-3 py-2">
                                    <button @click="saveApiKey()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                        Save
                                    </button>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">
                                    Get your free Groq API key from <a href="https://console.groq.com" target="_blank" class="text-blue-600">console.groq.com</a>
                                </p>
                            </div>
                            
                            <div x-show="aiApiKey">
                                <div class="flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg">
                                    <div class="flex items-center">
                                        <i class="fas fa-check-circle text-green-600 mr-2"></i>
                                        <span class="text-green-800">AI API Connected</span>
                                    </div>
                                    <button @click="aiApiKey = null" class="text-red-600 hover:text-red-800">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">AI Model</label>
                                <select x-model="aiModel" class="w-full border rounded-lg px-3 py-2">
                                    <option value="llama-3.1-8b-instant">Llama 3.1 8B (Fast)</option>
                                    <option value="llama-3.1-70b-versatile">Llama 3.1 70B (Powerful)</option>
                                    <option value="mixtral-8x7b-32768">Mixtral 8x7B</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="flex items-center">
                                    <input type="checkbox" x-model="aiAutoRespond" class="rounded mr-2">
                                    <span class="text-sm text-gray-700">Enable auto-responses</span>
                                </label>
                            </div>
                            
                            <button @click="testAiConnection()" class="w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition-all">
                                <i class="fas fa-flask mr-2"></i>Test AI Connection
                            </button>
                        </div>
                    </div>

                    <!-- AI Analytics -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-6">AI Analytics</h3>
                        
                        <div class="space-y-6">
                            <div class="grid grid-cols-2 gap-4">
                                <div class="text-center p-4 bg-blue-50 rounded-lg">
                                    <p class="text-2xl font-bold text-blue-600" x-text="aiStats.totalQueries">1,245</p>
                                    <p class="text-sm text-gray-600">Total Queries</p>
                                </div>
                                <div class="text-center p-4 bg-green-50 rounded-lg">
                                    <p class="text-2xl font-bold text-green-600" x-text="aiStats.avgResponseTime">0.8s</p>
                                    <p class="text-sm text-gray-600">Avg Response</p>
                                </div>
                            </div>
                            
                            <div>
                                <h4 class="font-medium text-gray-900 mb-3">Recent AI Interactions</h4>
                                <div class="space-y-2 max-h-64 overflow-y-auto">
                                    <template x-for="interaction in aiInteractions" :key="interaction.id">
                                        <div class="p-3 bg-gray-50 rounded-lg">
                                            <div class="flex justify-between items-start">
                                                <div class="flex-1">
                                                    <p class="text-sm text-gray-900" x-text="interaction.query"></p>
                                                    <p class="text-xs text-gray-500 mt-1" x-text="interaction.user"></p>
                                                </div>
                                                <span class="text-xs text-gray-400" x-text="interaction.timestamp"></span>
                                            </div>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI Automation Rules -->
                <div class="mt-6 bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-6">Automation Rules</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="p-4 border-2 border-dashed border-gray-300 rounded-lg text-center">
                            <i class="fas fa-user-plus text-4xl text-gray-400 mb-4"></i>
                            <h4 class="font-medium text-gray-900 mb-2">Welcome New Users</h4>
                            <p class="text-sm text-gray-600 mb-4">Automatically send welcome messages to new registrations</p>
                            <label class="flex items-center justify-center">
                                <input type="checkbox" x-model="automation.welcomeUsers" class="rounded mr-2">
                                <span class="text-sm">Enable</span>
                            </label>
                        </div>
                        
                        <div class="p-4 border-2 border-dashed border-gray-300 rounded-lg text-center">
                            <i class="fas fa-heart text-4xl text-gray-400 mb-4"></i>
                            <h4 class="font-medium text-gray-900 mb-2">Session Follow-up</h4>
                            <p class="text-sm text-gray-600 mb-4">Send feedback requests after completed sessions</p>
                            <label class="flex items-center justify-center">
                                <input type="checkbox" x-model="automation.sessionFollowup" class="rounded mr-2">
                                <span class="text-sm">Enable</span>
                            </label>
                        </div>
                        
                        <div class="p-4 border-2 border-dashed border-gray-300 rounded-lg text-center">
                            <i class="fas fa-exclamation-triangle text-4xl text-gray-400 mb-4"></i>
                            <h4 class="font-medium text-gray-900 mb-2">Issue Detection</h4>
                            <p class="text-sm text-gray-600 mb-4">Auto-detect and escalate platform issues</p>
                            <label class="flex items-center justify-center">
                                <input type="checkbox" x-model="automation.issueDetection" class="rounded mr-2">
                                <span class="text-sm">Enable</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Owner Controls Tab (if owner) -->
            {% if is_owner %}
            <div x-show="activeTab === 'owner'" class="slide-up">
                <div class="bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl p-6 text-white mb-6">
                    <div class="flex items-center">
                        <i class="fas fa-crown text-3xl mr-4"></i>
                        <div>
                            <h2 class="text-2xl font-bold">Owner Elite Controls</h2>
                            <p class="opacity-90">Full platform authority and advanced controls</p>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Admin Management -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-6">Admin Management</h3>
                        
                        <div class="space-y-4">
                            <button @click="showCreateAdminModal = true" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-all">
                                <i class="fas fa-user-shield mr-2"></i>Create New Admin
                            </button>
                            <button @click="managePermissions()" class="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-all">
                                <i class="fas fa-key mr-2"></i>Manage Permissions
                            </button>
                            <button @click="viewAdminLogs()" class="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-all">
                                <i class="fas fa-history mr-2"></i>Admin Activity Logs
                            </button>
                        </div>

                        <div class="mt-6">
                            <h4 class="font-medium text-gray-900 mb-3">Current Admins</h4>
                            <div class="space-y-2">
                                <template x-for="admin in adminList" :key="admin.id">
                                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                        <div class="flex items-center">
                                            <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mr-3">
                                                <i class="fas fa-user-shield text-blue-600"></i>
                                            </div>
                                            <div>
                                                <p class="text-sm font-medium" x-text="admin.name"></p>
                                                <p class="text-xs text-gray-500" x-text="admin.email"></p>
                                            </div>
                                        </div>
                                        <div class="flex space-x-2">
                                            <button @click="editAdmin(admin)" class="text-blue-600 hover:text-blue-800">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button @click="removeAdmin(admin)" class="text-red-600 hover:text-red-800" x-show="admin.id !== currentUserId">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>

                    <!-- Emergency Controls -->
                    <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-red-500">
                        <h3 class="text-lg font-semibold text-gray-900 mb-6">Emergency Controls</h3>
                        
                        <div class="space-y-4">
                            <button @click="platformMaintenance()" class="w-full bg-yellow-600 text-white py-3 rounded-lg hover:bg-yellow-700 transition-all">
                                <i class="fas fa-tools mr-2"></i>Enable Maintenance Mode
                            </button>
                            <button @click="emergencyBroadcast()" class="w-full bg-orange-600 text-white py-3 rounded-lg hover:bg-orange-700 transition-all">
                                <i class="fas fa-broadcast-tower mr-2"></i>Emergency Broadcast
                            </button>
                            <button @click="forceLogoutAll()" class="w-full bg-red-600 text-white py-3 rounded-lg hover:bg-red-700 transition-all">
                                <i class="fas fa-sign-out-alt mr-2"></i>Force Logout All Users
                            </button>
                            <button @click="platformShutdown()" class="w-full bg-red-800 text-white py-3 rounded-lg hover:bg-red-900 transition-all">
                                <i class="fas fa-power-off mr-2"></i>Emergency Shutdown
                            </button>
                        </div>

                        <div class="mt-6 p-4 bg-red-50 border border-red-200 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-exclamation-triangle text-red-600 mr-2"></i>
                                <p class="text-sm text-red-800 font-medium">Warning</p>
                            </div>
                            <p class="text-sm text-red-700 mt-1">Emergency controls affect all platform users. Use with extreme caution.</p>
                        </div>
                    </div>
                </div>

                <!-- Advanced Analytics -->
                <div class="mt-6 bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-6">Advanced Platform Analytics</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="text-center p-6 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg text-white">
                            <i class="fas fa-dollar-sign text-3xl mb-3"></i>
                            <p class="text-2xl font-bold" x-text="'₹' + platformRevenue">₹1,24,580</p>
                            <p class="text-sm opacity-90">Total Revenue</p>
                        </div>
                        <div class="text-center p-6 bg-gradient-to-br from-green-500 to-green-600 rounded-lg text-white">
                            <i class="fas fa-chart-line text-3xl mb-3"></i>
                            <p class="text-2xl font-bold" x-text="growthRate + '%'">+24.5%</p>
                            <p class="text-sm opacity-90">Growth Rate</p>
                        </div>
                        <div class="text-center p-6 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg text-white">
                            <i class="fas fa-trophy text-3xl mb-3"></i>
                            <p class="text-2xl font-bold" x-text="satisfactionScore + '%'">94.2%</p>
                            <p class="text-sm opacity-90">Satisfaction</p>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
        </main>
    </div>

    <!-- AI Chat Modal -->
    <div x-show="showAiChat" class="fixed inset-0 z-50 modal-backdrop" @click.self="showAiChat = false">
        <div class="fixed bottom-4 right-4 w-96 bg-white rounded-lg shadow-2xl" @click.stop>
            <div class="blue-gradient text-white p-4 rounded-t-lg">
                <div class="flex justify-between items-center">
                    <div class="flex items-center">
                        <i class="fas fa-robot text-xl mr-2"></i>
                        <h3 class="font-semibold">AI Assistant</h3>
                    </div>
                    <button @click="showAiChat = false" class="text-white hover:text-gray-200">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            
            <div class="h-96 overflow-y-auto p-4" id="chatMessages">
                <template x-for="message in chatMessages" :key="message.id">
                    <div :class="message.type === 'user' ? 'user-chat-bubble' : 'ai-chat-bubble'" x-text="message.content"></div>
                </template>
                
                <div x-show="aiTyping" class="typing-indicator">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
            
            <div class="p-4 border-t">
                <div class="flex space-x-2">
                    <input type="text" x-model="chatInput" @keyup.enter="sendChatMessage()" placeholder="Ask me anything..." class="flex-1 border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <button @click="sendChatMessage()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Modal -->
    <div x-show="showNotifications" x-transition class="fixed top-16 right-4 w-80 bg-white rounded-lg shadow-2xl z-40" @click.away="showNotifications = false">
        <div class="p-4 border-b">
            <div class="flex justify-between items-center">
                <h3 class="font-semibold text-gray-900">Notifications</h3>
                <button @click="markAllRead()" class="text-sm text-blue-600 hover:text-blue-800">Mark all read</button>
            </div>
        </div>
        <div class="max-h-96 overflow-y-auto">
            <template x-for="notification in notifications" :key="notification.id">
                <div class="p-4 border-b hover:bg-gray-50" :class="{'bg-blue-50': !notification.read}">
                    <div class="flex items-start">
                        <div :class="getNotificationColor(notification.type)" class="w-8 h-8 rounded-full flex items-center justify-center mr-3 flex-shrink-0">
                            <i :class="notification.icon" class="text-white text-sm"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="text-sm font-medium text-gray-900" x-text="notification.title"></p>
                            <p class="text-sm text-gray-600" x-text="notification.message"></p>
                            <p class="text-xs text-gray-400 mt-1" x-text="notification.timestamp"></p>
                        </div>
                        <button @click="dismissNotification(notification)" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xs"></i>
                        </button>
                    </div>
                </div>
            </template>
        </div>
    </div>

    <script>
        function adminDashboard() {
            return {
                activeTab: 'overview',
                showAiChat: false,
                showNotifications: false,
                showUserMenu: false,
                
                // Real-time data
                onlineUsers: {{ online_count }},
                activeSessions: 12,
                todayRevenue: 45680,
                serverLoad: 45,
                systemAlerts: 3,
                unreadNotifications: 8,
                lastUpdate: new Date().toLocaleTimeString(),
                
                // AI Configuration
                aiProvider: 'groq',
                aiModel: 'llama-3.1-8b-instant',
                aiApiKey: null,
                tempApiKey: '',
                aiAutoRespond: false,
                aiTyping: false,
                
                // Chat
                chatInput: '',
                chatMessages: [
                    { id: 1, type: 'ai', content: 'Hello! I\'m your AI assistant. How can I help you manage the platform today?' }
                ],
                
                // User Management
                userSearch: '',
                userRoleFilter: '',
                userStatusFilter: '',
                selectedUsers: [],
                bulkActions: false,
                
                // Email/Communication
                emailRecipients: 'all',
                emailSubject: '',
                emailMessage: '',
                notificationType: 'info',
                notificationTitle: '',
                notificationMessage: '',
                notificationSound: true,
                
                // Statistics
                userStats: {
                    total: {{ total_users }},
                    mentors: {{ total_mentors }},
                    learners: {{ total_learners }},
                    online: {{ online_count }}
                },
                
                sessionStats: {
                    live: 8,
                    scheduled: 24,
                    participants: 156,
                    avgDuration: '45m'
                },
                
                // Chat and Communication
                showAiChat: false,
                showNotifications: false,
                chatInput: '',
                chatMessages: [
                    { id: 1, type: 'ai', content: 'Hello! I\'m your AI assistant. How can I help you manage the platform today?' }
                ],
                
                // Notifications
                notifications: [
                    { id: 1, type: 'info', title: 'System Update', message: 'Platform maintenance scheduled for tonight', timestamp: '1 hour ago', read: false, icon: 'fas fa-info-circle' },
                    { id: 2, type: 'warning', title: 'High Server Load', message: 'Server experiencing heavy traffic', timestamp: '2 hours ago', read: false, icon: 'fas fa-exclamation-triangle' },
                    { id: 3, type: 'success', title: 'Backup Complete', message: 'Daily backup completed successfully', timestamp: '3 hours ago', read: true, icon: 'fas fa-check-circle' }
                ],
                
                // Automation settings
                automation: {
                    welcomeUsers: true,
                    sessionFollowup: false,
                    issueDetection: true
                },
                
                // Owner data
                adminList: [
                    { id: 1, name: 'Anandu Krishna', email: 'anandu@peerlearn.com' },
                    { id: 2, name: 'Platform Admin', email: 'admin@peerlearn.com' }
                ],
                platformRevenue: 124580,
                growthRate: 24.5,
                satisfactionScore: 94.2,
                currentUserId: {{ user.id }},
                
                // Sample data
                liveActivities: [
                    { id: 1, icon: 'fas fa-user-plus', message: 'New user registered: John Doe', timestamp: '2 minutes ago', status: 'Active', statusColor: 'bg-green-100 text-green-800' },
                    { id: 2, icon: 'fas fa-video', message: 'Session started: Python Basics', timestamp: '5 minutes ago', status: 'Live', statusColor: 'bg-blue-100 text-blue-800' },
                    { id: 3, icon: 'fas fa-dollar-sign', message: 'Payment received: ₹2,500', timestamp: '8 minutes ago', status: 'Success', statusColor: 'bg-green-100 text-green-800' }
                ],
                
                filteredUsers: [
                    {% for user in recent_users %}
                    {
                        id: {{ user.id }},
                        name: '{{ user.get_full_name|default:user.username }}',
                        email: '{{ user.email }}',
                        role: '{{ user.role }}',
                        status: '{% if user in online_users %}online{% else %}offline{% endif %}',
                        joined: '{{ user.date_joined|date:"M d, Y" }}',
                        lastActivity: '{% if user.last_login %}{{ user.last_login|timesince }} ago{% else %}Never{% endif %}',
                        profile_image: '{% if user.profile_image %}{{ user.profile_image.url }}{% else %}/static/images/default-avatar.png{% endif %}'
                    }{% if not forloop.last %},{% endif %}
                    {% endfor %}
                ],
                
                liveSessions: [
                    { id: 1, title: 'Python for Beginners', mentor: { name: 'Alice Smith', avatar: '/static/images/default-avatar.png' }, participants: { current: 8, max: 15 }, duration: '32 min', quality: 'Excellent' },
                    { id: 2, title: 'Web Development Basics', mentor: { name: 'Bob Johnson', avatar: '/static/images/default-avatar.png' }, participants: { current: 12, max: 20 }, duration: '45 min', quality: 'Good' }
                ],
                
                // Communication History
                communicationHistory: [
                    { id: 1, type: 'email', subject: 'Weekly Platform Update', recipients: 'All Users (245)', timestamp: '2 hours ago', status: 'Delivered', statusColor: 'bg-green-100 text-green-800', icon: 'fas fa-envelope' },
                    { id: 2, type: 'notification', subject: 'New Features Available', recipients: 'Active Users (189)', timestamp: '1 day ago', status: 'Sent', statusColor: 'bg-blue-100 text-blue-800', icon: 'fas fa-bell' },
                    { id: 3, type: 'email', subject: 'Security Update', recipients: 'All Mentors (56)', timestamp: '3 days ago', status: 'Delivered', statusColor: 'bg-green-100 text-green-800', icon: 'fas fa-shield-alt' }
                ],
                
                // AI Stats and Interactions
                aiStats: {
                    totalQueries: 1245,
                    avgResponseTime: '0.8s'
                },
                
                aiInteractions: [
                    { id: 1, query: 'Show me user activity trends', user: 'Admin User', timestamp: '10:30 AM' },
                    { id: 2, query: 'How many sessions today?', user: 'Manager', timestamp: '09:45 AM' },
                    { id: 3, query: 'Revenue analysis for this week', user: 'Owner', timestamp: '09:15 AM' },
                    { id: 4, query: 'Any platform issues?', user: 'Admin User', timestamp: '08:30 AM' }
                ],
                
                // Pagination
                userPagination: {
                    currentPage: 1,
                    totalPages: 5,
                    start: 1,
                    end: 20,
                    total: {{ total_users }}
                },
                
                notifications: [
                    { id: 1, type: 'info', title: 'System Update', message: 'Platform maintenance scheduled for tonight', timestamp: '1 hour ago', read: false, icon: 'fas fa-info-circle' },
                    { id: 2, type: 'warning', title: 'High Server Load', message: 'Server experiencing heavy traffic', timestamp: '2 hours ago', read: false, icon: 'fas fa-exclamation-triangle' },
                    { id: 3, type: 'success', title: 'Backup Complete', message: 'Daily backup completed successfully', timestamp: '3 hours ago', read: true, icon: 'fas fa-check-circle' }
                ],
                
                // Methods
                init() {
                    this.startRealTimeUpdates();
                    this.loadCharts();
                },
                
                startRealTimeUpdates() {
                    setInterval(() => {
                        this.updateRealTimeStats();
                        this.lastUpdate = new Date().toLocaleTimeString();
                    }, 5000);
                },
                
                updateRealTimeStats() {
                    // Simulate real-time updates
                    this.onlineUsers += Math.floor(Math.random() * 3) - 1;
                    this.activeSessions += Math.floor(Math.random() * 2) - 1;
                    this.todayRevenue += Math.floor(Math.random() * 1000);
                    this.serverLoad = Math.floor(Math.random() * 20) + 30;
                    
                    if (this.onlineUsers < 0) this.onlineUsers = 0;
                    if (this.activeSessions < 0) this.activeSessions = 0;
                },
                
                toggleAiChat() {
                    this.showAiChat = !this.showAiChat;
                },
                
                saveApiKey() {
                    if (this.tempApiKey.trim()) {
                        this.aiApiKey = this.tempApiKey;
                        this.tempApiKey = '';
                        this.showNotification('success', 'API Key Saved', 'Groq API key saved successfully');
                    }
                },
                
                async sendChatMessage() {
                    if (!this.chatInput.trim()) return;
                    if (!this.aiApiKey) {
                        this.showNotification('error', 'API Key Required', 'Please configure your Groq API key first');
                        return;
                    }
                    
                    const userMessage = this.chatInput;
                    this.chatMessages.push({ id: Date.now(), type: 'user', content: userMessage });
                    this.chatInput = '';
                    this.aiTyping = true;
                    
                    try {
                        const response = await fetch('/api/ai-chat/', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
                            },
                            body: JSON.stringify({
                                message: userMessage,
                                api_key: this.aiApiKey,
                                model: this.aiModel
                            })
                        });
                        
                        const data = await response.json();
                        this.aiTyping = false;
                        
                        if (data.success) {
                            this.chatMessages.push({ id: Date.now(), type: 'ai', content: data.response });
                        } else {
                            this.chatMessages.push({ id: Date.now(), type: 'ai', content: 'Sorry, I encountered an error. Please check your API key.' });
                        }
                    } catch (error) {
                        this.aiTyping = false;
                        this.chatMessages.push({ id: Date.now(), type: 'ai', content: 'Sorry, I\'m having trouble connecting. Please try again.' });
                    }
                    
                    // Scroll to bottom
                    this.$nextTick(() => {
                        const chatContainer = document.getElementById('chatMessages');
                        chatContainer.scrollTop = chatContainer.scrollHeight;
                    });
                },
                
                sendBulkEmail() {
                    if (!this.emailSubject || !this.emailMessage) {
                        this.showNotification('error', 'Missing Information', 'Please fill in subject and message');
                        return;
                    }
                    
                    // Send email via API
                    fetch('/api/admin/bulk-email/', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
                        },
                        body: JSON.stringify({
                            recipients: this.emailRecipients,
                            subject: this.emailSubject,
                            message: this.emailMessage
                        })
                    }).then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            this.showNotification('success', 'Email Sent', `Bulk email sent to ${data.count} users`);
                            this.emailSubject = '';
                            this.emailMessage = '';
                        } else {
                            this.showNotification('error', 'Email Failed', data.error);
                        }
                    });
                },
                
                sendNotification() {
                    if (!this.notificationTitle || !this.notificationMessage) {
                        this.showNotification('error', 'Missing Information', 'Please fill in title and message');
                        return;
                    }
                    
                    // Send notification via API
                    fetch('/api/admin/send-notification/', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
                        },
                        body: JSON.stringify({
                            type: this.notificationType,
                            title: this.notificationTitle,
                            message: this.notificationMessage,
                            sound: this.notificationSound
                        })
                    }).then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            this.showNotification('success', 'Notification Sent', 'Push notification sent to all users');
                            this.notificationTitle = '';
                            this.notificationMessage = '';
                        } else {
                            this.showNotification('error', 'Notification Failed', data.error);
                        }
                    });
                },
                
                banUser(user) {
                    if (confirm(`Are you sure you want to ban ${user.name}?`)) {
                        fetch(`/api/admin/ban-user/${user.id}/`, {
                            method: 'POST',
                            headers: {
                                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
                            }
                        }).then(response => response.json())
                        .then(data => {
                            if (data.success) {
                                this.showNotification('success', 'User Banned', `${user.name} has been banned`);
                                this.refreshUsers();
                            } else {
                                this.showNotification('error', 'Ban Failed', data.error);
                            }
                        });
                    }
                },
                
                deleteUser(user) {
                    if (confirm(`Are you sure you want to delete ${user.name}? This action cannot be undone.`)) {
                        fetch(`/api/admin/delete-user/${user.id}/`, {
                            method: 'DELETE',
                            headers: {
                                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
                            }
                        }).then(response => response.json())
                        .then(data => {
                            if (data.success) {
                                this.showNotification('success', 'User Deleted', `${user.name} has been deleted`);
                                this.refreshUsers();
                            } else {
                                this.showNotification('error', 'Delete Failed', data.error);
                            }
                        });
                    }
                },
                
                refreshUsers() {
                    fetch('/api/admin/users/')
                    .then(response => response.json())
                    .then(data => {
                        this.filteredUsers = data.users;
                        this.userStats = data.stats;
                    });
                },
                
                showNotification(type, title, message) {
                    const notification = {
                        id: Date.now(),
                        type: type,
                        title: title,
                        message: message,
                        timestamp: 'Just now',
                        read: false,
                        icon: this.getNotificationIcon(type)
                    };
                    this.notifications.unshift(notification);
                    this.unreadNotifications++;
                },
                
                getNotificationIcon(type) {
                    const icons = {
                        info: 'fas fa-info-circle',
                        success: 'fas fa-check-circle',
                        warning: 'fas fa-exclamation-triangle',
                        error: 'fas fa-times-circle'
                    };
                    return icons[type] || 'fas fa-bell';
                },
                
                getNotificationColor(type) {
                    const colors = {
                        info: 'bg-blue-500',
                        success: 'bg-green-500',
                        warning: 'bg-yellow-500',
                        error: 'bg-red-500'
                    };
                    return colors[type] || 'bg-gray-500';
                },
                
                getRoleClass(role) {
                    const classes = {
                        mentor: 'bg-green-100 text-green-800',
                        learner: 'bg-blue-100 text-blue-800',
                        admin: 'bg-purple-100 text-purple-800'
                    };
                    return classes[role] || 'bg-gray-100 text-gray-800';
                },
                
                getStatusColor(status) {
                    const colors = {
                        online: 'bg-green-500',
                        offline: 'bg-gray-400',
                        banned: 'bg-red-500',
                        suspended: 'bg-yellow-500'
                    };
                    return colors[status] || 'bg-gray-400';
                },
                
                loadCharts() {
                    // User Activity Chart
                    const ctx1 = document.getElementById('userActivityChart').getContext('2d');
                    new Chart(ctx1, {
                        type: 'line',
                        data: {
                            labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
                            datasets: [{
                                label: 'Active Users',
                                data: [120, 89, 156, 234, 187, 145],
                                borderColor: '#0056d3',
                                backgroundColor: 'rgba(0, 86, 211, 0.1)',
                                tension: 0.4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }
                    });
                    
                    // Revenue Chart
                    const ctx2 = document.getElementById('revenueChart').getContext('2d');
                    new Chart(ctx2, {
                        type: 'bar',
                        data: {
                            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                            datasets: [{
                                label: 'Revenue (₹)',
                                data: [12000, 15000, 18000, 22000, 25000, 20000, 16000],
                                backgroundColor: '#4285f4',
                                borderRadius: 4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }
                    });
                }
            }
        }
    </script>
</body>
</html>