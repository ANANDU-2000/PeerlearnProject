<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PeerLearn Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50" x-data="adminDashboard()">
    <!-- Mobile Header -->
    <div class="lg:hidden bg-white shadow-sm border-b">
        <div class="flex items-center justify-between p-4">
            <h1 class="text-xl font-bold text-blue-600">Admin Panel</h1>
            <button @click="sidebarOpen = !sidebarOpen" class="p-2 rounded-lg hover:bg-gray-100">
                <i class="fas fa-bars text-gray-600"></i>
            </button>
        </div>
    </div>

    <div class="flex h-screen">
        <!-- Sidebar -->
        <div :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full'" 
             class="fixed lg:relative lg:translate-x-0 w-64 bg-white shadow-lg h-full z-30 transition-transform duration-300">
            
            <!-- Sidebar Header -->
            <div class="p-6 border-b">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center">
                        <i class="fas fa-crown text-white"></i>
                    </div>
                    <div>
                        <h2 class="font-bold text-gray-800">Admin Panel</h2>
                        <p class="text-sm text-gray-500">System Control</p>
                    </div>
                </div>
            </div>

            <!-- Navigation Menu -->
            <nav class="mt-6">
                <div class="px-4 space-y-2">
                    <!-- Dashboard -->
                    <a @click="activeTab = 'dashboard'" 
                       :class="activeTab === 'dashboard' ? 'bg-blue-50 text-blue-600 border-r-2 border-blue-600' : 'text-gray-600 hover:bg-gray-50'"
                       class="flex items-center px-4 py-3 rounded-l-lg cursor-pointer transition-colors">
                        <i class="fas fa-tachometer-alt w-5"></i>
                        <span class="ml-3 font-medium">Dashboard</span>
                    </a>

                    <!-- User Management -->
                    <a @click="activeTab = 'users'" 
                       :class="activeTab === 'users' ? 'bg-blue-50 text-blue-600 border-r-2 border-blue-600' : 'text-gray-600 hover:bg-gray-50'"
                       class="flex items-center px-4 py-3 rounded-l-lg cursor-pointer transition-colors">
                        <i class="fas fa-users w-5"></i>
                        <span class="ml-3 font-medium">Users</span>
                    </a>

                    <!-- Session Management -->
                    <a @click="activeTab = 'sessions'" 
                       :class="activeTab === 'sessions' ? 'bg-blue-50 text-blue-600 border-r-2 border-blue-600' : 'text-gray-600 hover:bg-gray-50'"
                       class="flex items-center px-4 py-3 rounded-l-lg cursor-pointer transition-colors">
                        <i class="fas fa-video w-5"></i>
                        <span class="ml-3 font-medium">Sessions</span>
                    </a>

                    <!-- Bookings -->
                    <a @click="activeTab = 'bookings'" 
                       :class="activeTab === 'bookings' ? 'bg-blue-50 text-blue-600 border-r-2 border-blue-600' : 'text-gray-600 hover:bg-gray-50'"
                       class="flex items-center px-4 py-3 rounded-l-lg cursor-pointer transition-colors">
                        <i class="fas fa-calendar-check w-5"></i>
                        <span class="ml-3 font-medium">Bookings</span>
                    </a>

                    <!-- Payments -->
                    <a @click="activeTab = 'payments'" 
                       :class="activeTab === 'payments' ? 'bg-blue-50 text-blue-600 border-r-2 border-blue-600' : 'text-gray-600 hover:bg-gray-50'"
                       class="flex items-center px-4 py-3 rounded-l-lg cursor-pointer transition-colors">
                        <i class="fas fa-rupee-sign w-5"></i>
                        <span class="ml-3 font-medium">Payments</span>
                    </a>

                    <!-- Analytics -->
                    <a @click="activeTab = 'analytics'" 
                       :class="activeTab === 'analytics' ? 'bg-blue-50 text-blue-600 border-r-2 border-blue-600' : 'text-gray-600 hover:bg-gray-50'"
                       class="flex items-center px-4 py-3 rounded-l-lg cursor-pointer transition-colors">
                        <i class="fas fa-chart-line w-5"></i>
                        <span class="ml-3 font-medium">Analytics</span>
                    </a>

                    <!-- Django Admin -->
                    <a href="/admin/" target="_blank"
                       class="flex items-center px-4 py-3 rounded-l-lg text-gray-600 hover:bg-gray-50 cursor-pointer transition-colors">
                        <i class="fas fa-cogs w-5"></i>
                        <span class="ml-3 font-medium">Django Admin</span>
                        <i class="fas fa-external-link-alt ml-auto text-xs"></i>
                    </a>

                    <!-- System Settings -->
                    <a @click="activeTab = 'settings'" 
                       :class="activeTab === 'settings' ? 'bg-blue-50 text-blue-600 border-r-2 border-blue-600' : 'text-gray-600 hover:bg-gray-50'"
                       class="flex items-center px-4 py-3 rounded-l-lg cursor-pointer transition-colors">
                        <i class="fas fa-cog w-5"></i>
                        <span class="ml-3 font-medium">Settings</span>
                    </a>
                </div>
            </nav>

            <!-- Admin Profile -->
            <div class="absolute bottom-0 w-full p-4 border-t bg-gray-50">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-white text-sm"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-medium text-gray-800 truncate">{{ user.username }}</p>
                        <p class="text-xs text-gray-500">Super Admin</p>
                    </div>
                    <a href="{% url 'logout' %}" class="text-gray-400 hover:text-red-500">
                        <i class="fas fa-sign-out-alt"></i>
                    </a>
                </div>
            </div>
        </div>

        <!-- Overlay for mobile -->
        <div x-show="sidebarOpen" @click="sidebarOpen = false" 
             class="fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden"></div>

        <!-- Main Content -->
        <div class="flex-1 overflow-hidden">
            <div class="h-full overflow-y-auto">
                <!-- Dashboard Tab -->
                <div x-show="activeTab === 'dashboard'" class="p-6">
                    <div class="mb-6">
                        <h1 class="text-2xl lg:text-3xl font-bold text-gray-800">Dashboard Overview</h1>
                        <p class="text-gray-600 mt-2">Real-time platform analytics and controls</p>
                    </div>

                    <!-- Stats Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Total Users</p>
                                    <p class="text-3xl font-bold text-gray-800" x-text="stats.totalUsers">{{ stats.total_users }}</p>
                                </div>
                                <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-users text-blue-600"></i>
                                </div>
                            </div>
                            <div class="mt-4 flex items-center">
                                <span class="text-green-500 text-sm font-medium">+12%</span>
                                <span class="text-gray-500 text-sm ml-2">from last month</span>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Active Sessions</p>
                                    <p class="text-3xl font-bold text-gray-800" x-text="stats.activeSessions">{{ stats.active_sessions }}</p>
                                </div>
                                <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-video text-green-600"></i>
                                </div>
                            </div>
                            <div class="mt-4 flex items-center">
                                <span class="text-green-500 text-sm font-medium">+8%</span>
                                <span class="text-gray-500 text-sm ml-2">from yesterday</span>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Revenue</p>
                                    <p class="text-3xl font-bold text-gray-800">₹<span x-text="stats.totalRevenue">{{ stats.total_revenue|floatformat:0 }}</span></p>
                                </div>
                                <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-rupee-sign text-yellow-600"></i>
                                </div>
                            </div>
                            <div class="mt-4 flex items-center">
                                <span class="text-green-500 text-sm font-medium">+15%</span>
                                <span class="text-gray-500 text-sm ml-2">from last week</span>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Completion Rate</p>
                                    <p class="text-3xl font-bold text-gray-800" x-text="stats.completionRate + '%'">{{ stats.completion_rate|floatformat:1 }}%</p>
                                </div>
                                <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-chart-line text-purple-600"></i>
                                </div>
                            </div>
                            <div class="mt-4 flex items-center">
                                <span class="text-green-500 text-sm font-medium">+3%</span>
                                <span class="text-gray-500 text-sm ml-2">from last month</span>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Section -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <!-- Revenue Chart -->
                        <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">Revenue Trends</h3>
                            <canvas id="revenueChart" width="400" height="200"></canvas>
                        </div>

                        <!-- User Growth Chart -->
                        <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">User Growth</h3>
                            <canvas id="userGrowthChart" width="400" height="200"></canvas>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100">
                        <div class="p-6 border-b border-gray-100">
                            <h3 class="text-lg font-semibold text-gray-800">Recent System Activity</h3>
                        </div>
                        <div class="p-6">
                            <div class="space-y-4">
                                <div class="flex items-center space-x-4">
                                    <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                                        <i class="fas fa-user-plus text-green-600"></i>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-gray-800">New user registered</p>
                                        <p class="text-xs text-gray-500">john.doe@example.com joined as learner</p>
                                    </div>
                                    <span class="text-xs text-gray-400">2 min ago</span>
                                </div>

                                <div class="flex items-center space-x-4">
                                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                        <i class="fas fa-video text-blue-600"></i>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-gray-800">Session completed</p>
                                        <p class="text-xs text-gray-500">Python Basics session by Prof. Smith</p>
                                    </div>
                                    <span class="text-xs text-gray-400">5 min ago</span>
                                </div>

                                <div class="flex items-center space-x-4">
                                    <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center">
                                        <i class="fas fa-rupee-sign text-yellow-600"></i>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-gray-800">Payment received</p>
                                        <p class="text-xs text-gray-500">₹500 for Advanced JavaScript session</p>
                                    </div>
                                    <span class="text-xs text-gray-400">8 min ago</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Users Tab -->
                <div x-show="activeTab === 'users'" class="p-6">
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6">
                        <div>
                            <h1 class="text-2xl lg:text-3xl font-bold text-gray-800">User Management</h1>
                            <p class="text-gray-600 mt-2">Manage all platform users</p>
                        </div>
                        <div class="mt-4 lg:mt-0 flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3">
                            <button @click="showCreateUserModal = true" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                <i class="fas fa-plus mr-2"></i>Add User
                            </button>
                            <button class="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors">
                                <i class="fas fa-download mr-2"></i>Export
                            </button>
                        </div>
                    </div>

                    <!-- User Filters -->
                    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 mb-6">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <input type="text" placeholder="Search users..." 
                                   class="border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:outline-none">
                            <select class="border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:outline-none">
                                <option>All Roles</option>
                                <option>Mentors</option>
                                <option>Learners</option>
                                <option>Admins</option>
                            </select>
                            <select class="border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:outline-none">
                                <option>All Status</option>
                                <option>Active</option>
                                <option>Inactive</option>
                                <option>Banned</option>
                            </select>
                            <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                Apply Filters
                            </button>
                        </div>
                    </div>

                    <!-- Users Table -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50 border-b border-gray-100">
                                    <tr>
                                        <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">User</th>
                                        <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Role</th>
                                        <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                        <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Joined</th>
                                        <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-100">
                                    {% for user in users %}
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                                    <span class="text-blue-600 font-medium">{{ user.username.0|upper }}</span>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900">{{ user.username }}</div>
                                                    <div class="text-sm text-gray-500">{{ user.email }}</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full
                                                {% if user.role == 'mentor' %}bg-blue-100 text-blue-800
                                                {% elif user.role == 'learner' %}bg-green-100 text-green-800
                                                {% else %}bg-purple-100 text-purple-800{% endif %}">
                                                {{ user.role|title }}
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            {% if user.is_active %}
                                            <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                                                Active
                                            </span>
                                            {% else %}
                                            <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">
                                                Inactive
                                            </span>
                                            {% endif %}
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            {{ user.date_joined|date:"M d, Y" }}
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <div class="flex space-x-2">
                                                <button class="text-blue-600 hover:text-blue-700">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="text-red-600 hover:text-red-700">
                                                    <i class="fas fa-ban"></i>
                                                </button>
                                                <button class="text-gray-600 hover:text-gray-700">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>

                        <!-- Pagination -->
                        <div class="bg-gray-50 px-6 py-3 border-t border-gray-100">
                            <div class="flex flex-col sm:flex-row items-center justify-between">
                                <div class="text-sm text-gray-700 mb-2 sm:mb-0">
                                    Showing 1 to 10 of 47 results
                                </div>
                                <div class="flex space-x-1">
                                    <button class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-100">Previous</button>
                                    <button class="px-3 py-1 text-sm bg-blue-600 text-white rounded">1</button>
                                    <button class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-100">2</button>
                                    <button class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-100">3</button>
                                    <button class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-100">Next</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sessions Tab -->
                <div x-show="activeTab === 'sessions'" class="p-6">
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6">
                        <div>
                            <h1 class="text-2xl lg:text-3xl font-bold text-gray-800">Session Management</h1>
                            <p class="text-gray-600 mt-2">Create and manage learning sessions</p>
                        </div>
                        <button @click="showCreateSessionModal = true" class="mt-4 lg:mt-0 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            <i class="fas fa-plus mr-2"></i>Create Session
                        </button>
                    </div>

                    <!-- Session Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                        <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Total Sessions</p>
                                    <p class="text-2xl font-bold text-gray-800">{{ stats.total_sessions }}</p>
                                </div>
                                <i class="fas fa-video text-blue-600 text-xl"></i>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Live Now</p>
                                    <p class="text-2xl font-bold text-gray-800">{{ stats.live_sessions }}</p>
                                </div>
                                <i class="fas fa-broadcast-tower text-red-600 text-xl"></i>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Scheduled</p>
                                    <p class="text-2xl font-bold text-gray-800">{{ stats.scheduled_sessions }}</p>
                                </div>
                                <i class="fas fa-clock text-yellow-600 text-xl"></i>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Completed</p>
                                    <p class="text-2xl font-bold text-gray-800">{{ stats.completed_sessions }}</p>
                                </div>
                                <i class="fas fa-check-circle text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Sessions Table -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100">
                        <div class="p-6 border-b border-gray-100">
                            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                                <h3 class="text-lg font-semibold text-gray-800">All Sessions</h3>
                                <div class="mt-4 sm:mt-0 flex space-x-3">
                                    <select class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                                        <option>All Status</option>
                                        <option>Scheduled</option>
                                        <option>Live</option>
                                        <option>Completed</option>
                                        <option>Cancelled</option>
                                    </select>
                                    <input type="text" placeholder="Search sessions..." 
                                           class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                                </div>
                            </div>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Session</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Mentor</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Schedule</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Participants</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-100">
                                    {% for session in sessions %}
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">{{ session.title }}</div>
                                                <div class="text-sm text-gray-500">₹{{ session.price }}</div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4">
                                            <div class="text-sm text-gray-900">{{ session.mentor.username }}</div>
                                        </td>
                                        <td class="px-6 py-4">
                                            <div class="text-sm text-gray-900">{{ session.scheduled_time|date:"M d, Y" }}</div>
                                            <div class="text-sm text-gray-500">{{ session.scheduled_time|time:"H:i" }}</div>
                                        </td>
                                        <td class="px-6 py-4">
                                            <div class="text-sm text-gray-900">{{ session.bookings.count }}/{{ session.max_participants }}</div>
                                        </td>
                                        <td class="px-6 py-4">
                                            <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full
                                                {% if session.status == 'active' %}bg-red-100 text-red-800
                                                {% elif session.status == 'scheduled' %}bg-yellow-100 text-yellow-800
                                                {% elif session.status == 'completed' %}bg-green-100 text-green-800
                                                {% else %}bg-gray-100 text-gray-800{% endif %}">
                                                {{ session.status|title }}
                                            </span>
                                        </td>
                                        <td class="px-6 py-4">
                                            <div class="flex space-x-2">
                                                <button class="text-blue-600 hover:text-blue-700">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="text-green-600 hover:text-green-700">
                                                    <i class="fas fa-play"></i>
                                                </button>
                                                <button class="text-red-600 hover:text-red-700">
                                                    <i class="fas fa-ban"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Create Session Modal -->
                <div x-show="showCreateSessionModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
                    <div class="bg-white rounded-xl max-w-2xl w-full max-h-90vh overflow-y-auto">
                        <div class="p-6 border-b border-gray-100">
                            <div class="flex items-center justify-between">
                                <h3 class="text-lg font-semibold text-gray-800">Create New Session</h3>
                                <button @click="showCreateSessionModal = false" class="text-gray-400 hover:text-gray-600">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        
                        <form class="p-6 space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Session Title</label>
                                    <input type="text" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:outline-none" placeholder="e.g., Python Fundamentals">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Select Mentor</label>
                                    <select class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:outline-none">
                                        <option>Choose mentor...</option>
                                        {% for mentor in mentors %}
                                        <option value="{{ mentor.id }}">{{ mentor.username }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                                <textarea rows="3" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:outline-none" placeholder="Session description..."></textarea>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Price (₹)</label>
                                    <input type="number" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:outline-none" placeholder="500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Duration (mins)</label>
                                    <input type="number" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:outline-none" placeholder="60">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Max Participants</label>
                                    <input type="number" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:outline-none" placeholder="10">
                                </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Date</label>
                                    <input type="date" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:outline-none">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Time</label>
                                    <input type="time" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:outline-none">
                                </div>
                            </div>

                            <div class="flex justify-end space-x-3 pt-6 border-t border-gray-100">
                                <button type="button" @click="showCreateSessionModal = false" 
                                        class="px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50">
                                    Cancel
                                </button>
                                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                    Create Session
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Other tabs content continues... -->
                
            </div>
        </div>
    </div>

    <script>
        function adminDashboard() {
            return {
                activeTab: 'dashboard',
                sidebarOpen: false,
                showCreateUserModal: false,
                showCreateSessionModal: false,
                stats: {
                    totalUsers: {{ stats.total_users|default:0 }},
                    activeSessions: {{ stats.active_sessions|default:0 }},
                    totalRevenue: {{ stats.total_revenue|default:0 }},
                    completionRate: {{ stats.completion_rate|default:0 }}
                },

                init() {
                    this.initCharts();
                    this.loadData();
                },

                initCharts() {
                    // Revenue Chart
                    const revenueCtx = document.getElementById('revenueChart');
                    if (revenueCtx) {
                        new Chart(revenueCtx, {
                            type: 'line',
                            data: {
                                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                                datasets: [{
                                    label: 'Revenue (₹)',
                                    data: [12000, 19000, 15000, 25000, 22000, 30000],
                                    borderColor: 'rgb(59, 130, 246)',
                                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                    tension: 0.4
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: {
                                    y: {
                                        beginAtZero: true
                                    }
                                }
                            }
                        });
                    }

                    // User Growth Chart
                    const userCtx = document.getElementById('userGrowthChart');
                    if (userCtx) {
                        new Chart(userCtx, {
                            type: 'bar',
                            data: {
                                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                                datasets: [{
                                    label: 'New Users',
                                    data: [65, 78, 90, 81, 96, 115],
                                    backgroundColor: 'rgba(34, 197, 94, 0.8)'
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: {
                                    y: {
                                        beginAtZero: true
                                    }
                                }
                            }
                        });
                    }
                },

                async loadData() {
                    try {
                        // Load real-time stats
                        const response = await fetch('/admin-dashboard/api/stats/');
                        if (response.ok) {
                            const data = await response.json();
                            this.stats = data;
                        }
                    } catch (error) {
                        console.error('Error loading dashboard data:', error);
                    }
                }
            }
        }
    </script>
</body>
</html>